<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TradeWay Store</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f5f5f5;
}

/* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: white;
    padding: 12px 15px;
    border-bottom: 1px solid #ddd;
}

.menu-icon, .cart-icon, .fav-icon {
    font-size: 26px;
    cursor: pointer;
}

h2 {
    margin: 0;
    font-size: 20px;
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç */
.screen {
    display: none;
    padding: 15px;
}

.active {
    display: block;
}

/* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */
#sideMenu {
    position: fixed;
    top: 0;
    left: -280px;
    width: 260px;
    height: 100%;
    background: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.2);
    padding: 20px;
    transition: 0.3s;
    z-index: 10;
}

.menu-item {
    padding: 14px 0;
    font-size: 18px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
}

/* –¢–æ–≤–∞—Ä—ã */
.product {
    background: white;
    border-radius: 12px;
    padding: 10px;
    margin-bottom: 15px;
}

.product img {
    width: 100%;
    border-radius: 12px;
}

/* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫–∞–∑–∞—Ç—å */
.btn {
    display: block;
    width: 100%;
    padding: 12px;
    background: #007bff;
    color: white;
    text-align: center;
    border-radius: 8px;
    margin-top: 10px;
    cursor: pointer;
}

/* –ö–æ—Ä–∑–∏–Ω–∞ */
.cart-item {
    background: white;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 10px;
}

/* –ü—Ä–æ—Ñ–∏–ª—å */
input {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: 1px solid #ddd;
}

</style>
</head>

<body>

<header>
    <span class="menu-icon" onclick="openMenu()">‚ò∞</span>
    <h2 id="screenTitle">–ì–ª–∞–≤–Ω–∞—è</h2>
    <span class="cart-icon" onclick="openCart()">üõí</span>
</header>

<!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
<div id="sideMenu">
    <div class="menu-item" onclick="openScreen('profile')">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</div>
    <div class="menu-item" onclick="openScreen('orders')">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
    <div class="menu-item" onclick="openScreen('favorites')">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
    <div class="menu-item" onclick="openSupport()">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
    <div class="menu-item" onclick="openScreen('profile')">–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</div>
    <div class="menu-item" onclick="logout()">–í—ã—Ö–æ–¥</div>
</div>

<!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
<div id="home" class="screen active">

    <div id="productList"></div>

</div>

<!-- –ö–û–†–ó–ò–ù–ê -->
<div id="cart" class="screen">

    <div id="cartList"></div>
    <div class="btn" onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</div>

</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="screen">
    <h3>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h3>
    <input id="nameField" placeholder="–ò–º—è">
    <input id="phoneField" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
    <input id="addressField" placeholder="–ê–¥—Ä–µ—Å">
    <div class="btn" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</div>
</div>

<!-- –ó–ê–ö–ê–ó–´ -->
<div id="orders" class="screen">
    <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
    <div id="ordersList"></div>
</div>

<!-- –ò–ó–ë–†–ê–ù–ù–û–ï -->
<div id="favorites" class="screen">
    <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
    <div id="favList"></div>
</div>

<script>
// URL Apps Script
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw3wsocC-b85NvJ2S0jrW_uLR39MYSJNWy5GDgF7Je0qNvWT_9Ncnkwm0k5RkSo25vf/exec";

let cart = JSON.parse(localStorage.getItem("cart") || "[]");
let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
let orders = JSON.parse(localStorage.getItem("orders") || "[]");

let products = [
    {id:1, name:"–°–º–∞—Ä—Ç—Ñ–æ–Ω Samsung A4", price:6000, img:"https://iili.io/KmrTpyX.jpg"},
    {id:2, name:"–ö—É—Ä—Ç–∫–∞ –∑–∏–º–Ω—è—è", price:9000, img:"https://iili.io/KmrYkGa.jpg"},
    {id:3, name:"–ö–µ–¥—ã –º—É–∂—Å–∫–∏–µ", price:2500, img:"https://iili.io/KmrlFYx.jpg"}
];

function renderHome() {
    let html = "";
    products.forEach(p => {
        html += `
        <div class="product">
            <img src="${p.img}">
            <h3>${p.name}</h3>
            <b>${p.price} —Å–æ–º–æ–Ω–∏</b>
            <div class="btn" onclick="addToCart(${p.id})">–í –∫–æ—Ä–∑–∏–Ω—É</div>
        </div>`;
    });
    document.getElementById("productList").innerHTML = html;
}
renderHome();

function addToCart(id) {
    let item = products.find(p => p.id === id);
    cart.push({...item, qty:1});
    localStorage.setItem("cart", JSON.stringify(cart));
    alert("–î–æ–±–∞–≤–ª–µ–Ω–æ!");
}

// –ú–µ–Ω—é
function openMenu() {
    document.getElementById("sideMenu").style.left = "0";
}
document.body.onclick = e => {
    if (!e.target.closest("#sideMenu") && !e.target.closest(".menu-icon"))
        document.getElementById("sideMenu").style.left = "-280px";
};

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
function openScreen(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.getElementById("screenTitle").innerText = 
        id==="home" ? "–ì–ª–∞–≤–Ω–∞—è" :
        id==="cart" ? "–ö–æ—Ä–∑–∏–Ω–∞" :
        id==="profile" ? "–ü—Ä–æ—Ñ–∏–ª—å" :
        id==="orders" ? "–ó–∞–∫–∞–∑—ã" :
        id==="favorites" ? "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" : "";
}

// –ö–æ—Ä–∑–∏–Ω–∞
function openCart() {
    openScreen("cart");
    let html = "";
    cart.forEach(c => {
        html += `<div class="cart-item">${c.name} ‚Äî ${c.price} —Å–æ–º–æ–Ω–∏</div>`;
    });
    document.getElementById("cartList").innerHTML = html;
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
function saveProfile() {
    localStorage.setItem("name", document.getElementById("nameField").value);
    localStorage.setItem("phone", document.getElementById("phoneField").value);
    localStorage.setItem("address", document.getElementById("addressField").value);
    alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!");
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
function loadProfile() {
    document.getElementById("nameField").value = localStorage.getItem("name") || "";
    document.getElementById("phoneField").value = localStorage.getItem("phone") || "";
    document.getElementById("addressField").value = localStorage.getItem("address") || "";
}
loadProfile();

// –ü–æ–¥–¥–µ—Ä–∂–∫–∞
function openSupport() {
    window.location.href = "https://t.me/USERNAME"; // <<< –í–°–¢–ê–í–¨ –°–í–û–ô –¢–ï–õ–ï–ì–†–ê–ú
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
function sendOrder() {
    let data = {
        name: localStorage.getItem("name"),
        phone: localStorage.getItem("phone"),
        address: localStorage.getItem("address"),
        cart: JSON.stringify(cart)
    };

    fetch(SCRIPT_URL, {
        method: "POST",
        body: new FormData(Object.entries(data).reduce((f,[k,v]) => (f.append(k,v),f), new FormData()))
    });

    orders.push({
        time: new Date().toLocaleString(),
        items: cart
    });

    localStorage.setItem("orders", JSON.stringify(orders));
    cart = [];
    localStorage.setItem("cart", "[]");

    alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
    openScreen("home");
}

</script>
</body>
</html>
